@model Integratieproject1.Domain.Projects.Project

@{
    ViewBag.Title = "ProjectPage";
    Layout = "/UI/Views/Shared/_Layout.cshtml";
}
<div class="jumbotron jumbotron-fluid text-center">
    <h1 class="display-4">@Model.ProjectName</h1>
    <p>@Model.Description</p>
    <div class="progress" style="height: 30px;">
        @foreach (var phase in Model.Phases)
        {
            var phaseWidth = Math.Round((((phase.EndDate - phase.StartDate).TotalDays) / ((Model.EndDate - Model.StartDate).TotalDays) * 100), 0);
            if (DateTime.Now >= phase.StartDate && DateTime.Now <= phase.EndDate)
            {
                <div class="progress-bar" role="progressbar" style="width: @phaseWidth%; background-color: #007bff" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100">
                    <strong>@phase.PhaseName</strong>
                </div>
            }
            else
            {
                <div class="progress-bar" role="progressbar" style="width: @phaseWidth%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100">
                    @phase.PhaseName
                </div>
            }
        }
    </div>
    <div class="d-flex flex-row justify-content-between">
        <p>@Model.StartDate.ToString("d")</p>
        <p>@Model.EndDate.ToString("d")</p>

    </div>
</div>
<div class="container">
    <div class="d-flex flex-row flex-wrap justify-content-center">
        @foreach (var phase in Model.Phases)
        {
            if (DateTime.Now >= phase.StartDate && DateTime.Now <= phase.EndDate)
            {
                <button id="btnPhase+@phase.PhaseId.ToString()" onclick="displayPhase('btnPhase+' + @phase.PhaseId.ToString())" class="btn btn-primary btnPhase">@phase.PhaseName</button>
            }
            else
            {
                <button id="btnPhase+@phase.PhaseId.ToString()" onclick="displayPhase('btnPhase+' + @phase.PhaseId.ToString())" class="btn btn-secondary btnPhase">@phase.PhaseName</button>
            }
        }
    </div>
    @foreach (var phase in Model.Phases)
    {
        if (DateTime.Now >= phase.StartDate && DateTime.Now <= phase.EndDate)
        {
            <div id="phase+@phase.PhaseId.ToString()" class="phase" style="display: block">
                <div class="d-flex flex-row flex-wrap justify-content-center">
                
                    <div class="card text-center" style="width: 75%; border-left: none; border-right: none; border-bottom: none;">
                        <div class="card-body">
                            <h5 class="card-title">@phase.PhaseName</h5>
                            <p class="card-text">@phase.Description</p>
                            <div class="progress" style="height: 1px;">
                                <div class="progress-bar" role="progressbar" style="width: 100%; background-color: #007bff" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-between">
                                <p>@phase.StartDate.ToString("d")</p>
                                <p>@phase.EndDate.ToString("d")</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row flex-wrap justify-content-around align-content-stretch" style="width: 100%">
                    <div class="d-flex flex-column justify-content-start flex-wrap ideations">
                        @foreach (var ideation in phase.Ideations)
                        {
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">@ideation.CentralQuestion</h5>
                                    
                                        @if (@ideation.InputIdeation == true)
                                        {
                                            <a class="btn btn-primary" asp-area=""
                                               asp-controller="Project"
                                               asp-action="Ideation" asp-route-ideationId="@ideation.IdeationId">
                                                Give your idea! 
                                            </a>
                                        }
                                        else
                                        {
                                            <a class="btn btn-primary" asp-area=""
                                               asp-controller="Project"
                                               asp-action="Ideation" asp-route-ideationId="@ideation.IdeationId">
<<<<<<< HEAD
                                                Vote for your favorit! 
=======
                                                Vote for your favorite! 
>>>>>>> b39b4e77617c3cabb4d07584c7526e97422f8669
                                            </a> 
                                        }
                                        
                                    
                                    </div>
                                    <div class="card-footer">
                                        <i class="fa fa-lightbulb-o"></i>    @ideation.Ideas.Count
                                    </div>
                                </div>
                        }
                    </div>
                    <div class="d-flex flex-column justify-content-start flex-wrap surveys">
                        @foreach (var survey in phase.Surveys)
                        {
                            
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5 class="card-title">@survey.Title</h5>
                                        <a class="btn btn-primary" asp-area=""
                                           asp-controller="Project"
                                           asp-action="Survey" asp-route-surveyId="@survey.SurveyId">
                                            Give your input!
                                        </a>
                                    
                                    </div>
                                </div>
                        }
                    </div>
                </div>

                
            </div>
        }
        else
        {
            <div id="phase+@phase.PhaseId.ToString()" class="phase" style="display: none">
                <div class="d-flex flex-row flex-wrap justify-content-center ">
                    <div class="card text-center" style="width: 75%; border-left: none; border-right: none; border-bottom: none;">
                        <div class="card-body">
                            <h5 class="card-title">@phase.PhaseName</h5>
                            <p class="card-text">@phase.Description</p>
                            <div class="progress" style="height: 1px;">
                                <div class="progress-bar" role="progressbar" style="width: 100%; background-color: #007bff" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-between">
                                <p>@phase.StartDate.ToString("d")</p>
                                <p>@phase.EndDate.ToString("d")</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex flex-row flex-wrap justify-content-around align-content-stretch" style="width: 100%">
                    <div class="d-flex flex-column justify-content-center flex-wrap ideations">
                        @foreach (var ideation in phase.Ideations)
                        {
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title">@ideation.CentralQuestion</h5>
                                    <a class="btn btn-primary" asp-area=""
                                       asp-controller="Project"
                                       asp-action="Ideation" asp-route-projectId="@ideation.IdeationId">
                                        Give your idea!
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="d-flex flex-column justify-content-center flex-wrap surveys">
                        @foreach (var survey in phase.Surveys)
                        {
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title">@survey.Title</h5>
                                    <a class="btn btn-primary" asp-area=""
                                       asp-controller="Project"
                                       asp-action="Survey" asp-route-projectId="@survey.SurveyId">
                                        Give your input!
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    }

</div>

<script>
    function displayPhase(id) {
        var btn = document.getElementById(id);
        var phase = document.getElementById("phase+" + id.charAt(id.length - 1));
        var buttons = document.getElementsByClassName("btnPhase");
        var phases = document.getElementsByClassName("phase");
        var i;
        for (i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("btn-primary");
            buttons[i].classList.add("btn-secondary");
            phases[i].style.display = "none";
        }
        btn.classList.remove("btn-secondary");
        btn.classList.add("btn-primary");
        phase.style.display = "block";
    }
</script>