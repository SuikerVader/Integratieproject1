@using Integratieproject1.Domain.Ideations
@using Integratieproject1.Domain.Users
@model Integratieproject1.Domain.Ideations.Idea

@{
    ViewBag.Title = "ideaPage";
    ViewBag.ideaId = Model.IdeaId;
    Layout = "/UI/Views/Shared/_Layout.cshtml";
}
<div class="container">

<h2>@Model.Title</h2>
<p>votes: @Model.Votes.Count</p>
<p>number of reactions: @Model.Reactions.Count</p>

@*<a asp-area="" asp-controller="Project"
   asp-action="CreateVote" asp-route-votType="@VoteType.VOTE" asp-route-ideaId="@Model.IdeaId"><button>vote</button>
</a><br/>*@

<form asp-controller="Project" asp-action="CreateUserVote" asp-route-voteType="@VoteType.VOTE" asp-route-ideaId="@Model.IdeaId">
    <select name="user">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    <input type="submit" value="user vote">
</form><br/>
<form class="facebookShare" asp-controller="Project" asp-action="CreateUserVote" asp-route-voteType="@VoteType.SHARE_FB" asp-route-ideaId="@Model.IdeaId">
    <select name="user">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    <div class="facebook"
         data-href="https://developers.facebook.com/docs/plugins/"
         data-layout="button">
        <button class="btn btn-facebook btn-lg "
                
                type="submit"
                onclick="share_fb('https://developers.facebook.com/docs/plugins/')">
            Share
        </button>
    </div>
</form>
<form class="TwitterShare" asp-controller="Project" asp-action="CreateUserVote" asp-route-voteType="@VoteType.SHARE_TW" asp-route-ideaId="@Model.IdeaId">
    <select name="user">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    <div class="twitter">
        <button type="submit" onclick="share_tw()"
                class="btn btn-twitter btn-lg">
            Tweet
        </button>
    </div>
</form>

<button onclick="showHideCreateReaction()">react</button>
<div id="reaction" style="display: none">
    @await Html.PartialAsync("_PostReactionPartial.cshtml", new Reaction())
</div><br/>
<h3>reactions: </h3>
@foreach (var reaction in Model.Reactions)
{
    if (reaction.LoggedInUser.GetType() == typeof(Person))
    {
        Person person = (Person) reaction.LoggedInUser;
        <strong>@person.LastName @person.FirstName.First()</strong>
    }
    if (reaction.LoggedInUser.GetType() == typeof(Organisation))
    {
        Organisation organisation = (Organisation) reaction.LoggedInUser;
        <strong>@organisation.OrganisationName</strong>
    }
    <p></p>
    <p>@reaction.ReactionText</p>
    <p>total likes: @reaction.Likes.Count</p>
    <br/>
    <form asp-controller="Project" asp-action="LikeReaction" asp-route-ideaId="@Model.IdeaId" asp-route-reactionId="@reaction.ReactionId">

        <select name="user">
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
        <input type="submit" value="like reactie">
    </form>
    <br/>
}
</div>

<script>
    function showHideCreateReaction() {
        var x = document.getElementById('reaction');
        if (x.style.display === 'none') {
            x.style.display = 'inline-block';
        } else {
            x.style.display = 'none';
        }
    }

    function share_fb(url) {
        window.open('https://www.facebook.com/sharer/sharer.php?u=' + url,
            'facebook-share-dialog',
            "width=626, height=436")
    }

    function share_tw() {
        window.open("https://twitter.com/share?ref_src=twsrc%5Etfw",
            'twitter-share-dialog',
            "width=626, height=436")
    }
</script>
<script
    async defer crossorigin="anonymous"
    src="https://connect.facebook.net/nl_NL/sdk.js#xfbml=1&version=v3.2">
</script>
<script
    async src="https://platform.twitter.com/widgets.js"
    charset="utf-8">
</script>